
        <dashboard version="2" theme="dark">
            <label>PFC_view_DM_deploymentInfo</label>
            <description>PFC_view_DM_deploymentInfo</description>
            <definition><![CDATA[{"visualizations":{"viz_JQDON1kv":{"type":"splunk.table","dataSources":{"primary":"ds_BpFhhPfr"},"title":"Diagnostic File & Host Details","options":{"columnFormat":{"Diagnostic Filename & Timestamp":{"data":"> table | seriesByName(\"Diagnostic Filename & Timestamp\") | formatByType(Diagnostic_Filename___TimestampColumnFormatEditorConfig)"}},"count":5,"tableFormat":{"rowBackgroundColors":"> table | seriesByIndex(0) | pick(tableAltRowBackgroundColorsByTheme)"}},"context":{"Diagnostic_Filename___TimestampColumnFormatEditorConfig":{"string":{"unitPosition":"after"}}},"showProgressBar":true,"showLastUpdated":true},"viz_NrHOMrRd":{"type":"viz.text","options":{"content":"Automated Discovery -- Customer Deployment Information Summary","fontSize":29}},"viz_pwA7cBWd":{"type":"viz.line","dataSources":{"primary":"ds_FDbm3zdG"},"title":"Timeline of Available Data by Sourcetype by $customer$","description":"Duration in Hours of available log data by earliest available timestamp","options":{"chart.nullValueMode":"zero","legend.placement":"top","chart.showDataLabels":"minmax"},"showProgressBar":true,"showLastUpdated":true},"viz_uUUnZUZY":{"type":"splunk.table","dataSources":{"primary":"ds_k8MRCnQO"},"options":{"count":1},"showProgressBar":true,"showLastUpdated":true},"viz_yLCvlBOi":{"type":"viz.text","options":{"content":"A summary count of discovery the # Universal Forwarders, Search Heads, Peers/Indexers and count of Indexes found during evaluation.","fontSize":14}}},"dataSources":{"ds_nhJDUy4r":{"type":"ds.search","options":{"query":"| inputlookup host_role_lkp |  fields customer "},"name":"customer"},"ds_nhJDU444":{"type":"ds.search","options":{"query":"| inputlookup host_role_lkp | fields customer host_short_name | search customer=$customer$ | fields host_short_name"},"name":"host_short_name"},"ds_FDbm3zdG":{"type":"ds.search","options":{"query":"index=pfc sourcetype=*_log |  lookup host_role.csv host_short_name OUTPUT customer \n|  search customer=$customer$\n| stats earliest(_time) AS earliest_found_time latest(_time) AS latest_found_time by sourcetype, host_short_name \n| convert ctime(earliest_found_time) AS earliest_timestamp | convert ctime(latest_found_time) AS latest_timestamp \n| eval duration_seconds=latest_found_time-earliest_found_time \n| eval duration_hours=duration_seconds/60 \n| eval duration_days=round(duration_seconds/86400,2)  | eval _time=earliest_found_time\n| timechart max(duration_hours) AS duration_hours by  sourcetype "},"name":"diag_timeline"},"ds_BpFhhPfr":{"type":"ds.search","options":{"query":"| tstats prestats=true summariesonly=false allow_old_summaries=false values(\"deploymentInfo.host_short_name\") as \"Distinct Values of host_short_name\", values(host) as \"Distinct Values of host\" FROM datamodel=DM_deploymentInfo.deploymentInfo WHERE (nodename=deploymentInfo \"deploymentInfo.customer\"=\"$customer$\" \"deploymentInfo.version\">\"1.0\") BY \"deploymentInfo.version\", \"deploymentInfo.role\" | stats dedup_splitvals=t values(deploymentInfo.host_short_name) AS \"host_short_name\" values(host) AS \"host\" by deploymentInfo.version, deploymentInfo.role | sort limit=100 deploymentInfo.version | fields - _span | rename \"deploymentInfo.version\" as version, \"deploymentInfo.role\" as role | stats max(version) by host_short_name role"},"name":"host_role_version"},"ds_9aFJlptN":{"type":"ds.search","options":{"query":"| tstats prestats=true summariesonly=false allow_old_summaries=true max(\"deploymentInfo.index_count\") as \"# of Indexes Found\", max(\"deploymentInfo.Peer_Count\") as \"# of Peers/Indexers Found\", dc(\"deploymentInfo.sourceHost\") as \"# of UFs Found\", dc(\"deploymentInfo.origin_sh\") as \"# of Search Heads Found\" FROM datamodel=DM_deploymentInfo.deploymentInfo WHERE (nodename=deploymentInfo \"deploymentInfo.customer\"=$customer$) BY \"deploymentInfo.customer\" | stats dedup_splitvals=t max(deploymentInfo.index_count) AS \"# of Indexes Found\" max(deploymentInfo.Peer_Count) AS \"# of Peers/Indexers Found\" dc(deploymentInfo.sourceHost) AS \"# of UFs Found\" dc(deploymentInfo.origin_sh) AS \"# of Search Heads Found\" by deploymentInfo.customer | sort limit=100 deploymentInfo.customer | fields - _span | rename \"deploymentInfo.customer\" as Customer | fillnull \"# of UFs Found\" \"# of Search Heads Found\" | fields + Customer, \"# of Indexes Found\", \"# of Peers/Indexers Found\", \"# of UFs Found\", \"# of Search Heads Found\""},"name":"deployment_info"},"ds_k8MRCnQO":{"type":"ds.search","options":{"query":"index=pfc (sourcetype=splunkd_log AND site) OR (sourcetype=metrics_log sourceHost OR Peer_Count) OR (sourcetype=\"peers_csv\") OR (sourcetype=audit_log action=search \"search/jobs/\" NOT \"search/jobs/16*\") | rex field=_raw \"remote.(?<origin_sh>.{1,25})_subsearch\" | eval index_count=mvcount(split(searchable_indexes,\",\"))-1 | stats dc(origin_sh) AS \"# of SH\" max(Peer_Count) AS \"# of IDX\" dc(sourceHost) AS \"UF count\" max(index_count) AS \"Index Count\""},"name":"deployment_info_2"}},"defaults":{"dataSources":{"ds.search":{"options":{"queryParameters":{"latest":"$global_time.latest$","earliest":"$global_time.earliest$"}}}}},"inputs":{"input_global_trp":{"type":"input.timerange","options":{"token":"global_time","defaultValue":"0,"},"title":"Global Time Range"},"input_2":{"type":"input.dropdown","options":{"items":[{"label":"All","value":"*"}],"token":"customer","defaultValue":"*"},"encoding":{"label":"primary[0]","value":"primary[0]"},"dataSources":{"primary":"ds_nhJDUy4r"},"title":"Select Customer"}},"layout":{"type":"absolute","options":{"display":"auto-scale","backgroundColor":"#000000"},"structure":[{"item":"viz_JQDON1kv","type":"block","position":{"x":10,"y":230,"w":1170,"h":300}},{"item":"viz_NrHOMrRd","type":"block","position":{"x":140,"y":0,"w":870,"h":60}},{"item":"viz_pwA7cBWd","type":"block","position":{"x":10,"y":540,"w":1170,"h":340}},{"item":"viz_uUUnZUZY","type":"block","position":{"x":10,"y":100,"w":1170,"h":100}},{"item":"viz_yLCvlBOi","type":"block","position":{"x":10,"y":60,"w":920,"h":50}}],"globalInputs":["input_global_trp","input_2"]},"description":"PFC_view_DM_deploymentInfo","title":"PFC_view_DM_deploymentInfo"}]]></definition>
            <assets><![CDATA[{}]]></assets>
        </dashboard>